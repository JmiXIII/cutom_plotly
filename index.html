<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>My Grist Chart Widget</title>
  <!-- Include Plotly.js library -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
</head>

<body>
  <!-- Create a container element for the chart -->
  <div id="chart-container"></div>
  <pre id="readout">Waiting for data...</pre>
  <script>
    // Wait for the Grist API to be ready
    grist.ready({
      columns: ["Date", "Resultats", "Objectif"],
      requiredAccess: "read table",
    });
    // When a new record is selected in the Grist table, render a chart based on its data
    grist.onRecords(function (records, mappings) {
      const mapped = grist.mapColumnNames(record);
      if (mapped) {
        document.getElementById('readout').innerHTML = JSON.stringify(records, null, 2);
      } else {
        // Helper returned a null value. It means that not all
        // required columns were mapped.
        console.error("Please map all columns");
      }
    });
  </script>
</body>

</html>